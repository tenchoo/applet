"use strict";var _api=require("../../config/api"),wxAPI=require("../../common/js/wxAPI"),app=getApp();Page({data:{screenData:["地区筛选","是否连锁","是否医保"],pharmacyPage:[]},onLoad:function(a){this.setData({clientId:a.client_id})},onShow:function(){this.getThirdDrugstore(this)},getThirdDrugstore:function(a,t){var e=this,o={account_id:wx.getStorageSync("account_id"),page:"1",search_text:"",province_id:"",city_id:"",area_id:"",brand:"",is_exploited:""};if(t&&"[object Object]"===Object.prototype.toString.call(t))for(var r in t)o.hasOwnProperty(r)&&(o[r]=t[r]);wxAPI.postRequest(_api.api.third_pharmacy,o).then(function(t){if(0===t.data.status){var r=t.data.data;"1"===o.page?a.setData({dataCount:r.dataCount,currentPage:r.currentPage,pageCount:r.pageCount,pharmacyPage:r.pharmacyPage}):a.setData({currentPage:r.currentPage,pharmacyPage:e.data.pharmacyPage.concat(r.pharmacyPage)})}else console.log(t.data.msg)})},onReachBottom:function(){var a=this.data.currentPage,t=this.data.pageCount;a<t?console.log("aa"):(console.log(a),console.log(t),console.log("bb")),this.data.currentPage<this.data.pageCount&&(console.log("s"),this.getThirdDrugstore(this,{page:parseInt(this.data.currentPage)+1+""}))}});