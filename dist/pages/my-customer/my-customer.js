"use strict";var _api=require("../../config/api"),common=require("../../common/js/common"),wxAPI=require("../../common/js/wxAPI"),app=getApp();Page({data:{placeHolder:"请输入医生姓名",screenItem_1:"医院等级",screenItem_2:"医生等级",screenItem_3:"筛选科室",currentPage:"1",pageCount:"",doctorPage:[],dataCount:"",floatBtnTapData:!1,defaultBool:!0},onShow:function(){common.searchGroup.apply(this,[]),this.getDoctorPage(this,"1"),this.getStarDoctorList(this)},onHide:function(){this.setData({floatBtnTapData:!1})},getStarDoctorList:function(t){wxAPI.postRequest(_api.api.star_doctor_list,{account_id:wx.getStorageSync("account_id")}).then(function(a){0===a.data.status?t.setData({defaultBool:!1,starDoctorList:a.data.data.starList}):t.setData({starDoctorList:[]})})},getDoctorPage:function(t,a){var o=this,e={account_id:wx.getStorageSync("account_id"),page:a};wxAPI.postRequest(_api.api.doctor_page,e).then(function(e){if(0===e.data.status){var n=e.data.data;"1"===a?t.setData({dataCount:n.dataCount,currentPage:n.currentPage,pageCount:n.pageCount,doctorPage:n.doctorPage,defaultBool:!1}):t.setData({defaultBool:!1,currentPage:n.currentPage,doctorPage:o.data.doctorPage.concat(n.doctorPage)})}else t.setData({defaultBool:!0,dataCount:"",currentPage:"",pageCount:"",doctorPage:[]})})},onReachBottom:function(){this.data.currentPage<this.data.pageCount&&this.getDoctorPage(this,parseInt(this.data.currentPage)+1+"")},floatBtnTap:function(){var t=!this.data.floatBtnTapData;this.setData({floatBtnTapData:t})},delSelf:function(t){var a=t.currentTarget.id;wxAPI.showModal("","是否删除该客户？","删除").then(function(t){t.confirm&&wxAPI.postRequest(_api.api.doctor_delete,{doctor_id:a}).then(function(t){if(0===t.data.status){var a={title:"操作成功",icon:"success"};wxAPI.wxPromiseObj(wx.showToast,a).then(function(t){wx.navigateTo({url:"my-customer"})})}})})}});