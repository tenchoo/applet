"use strict";var _api=require("../../config/api"),wxAPI=require("../../common/js/wxAPI"),animation=require("../../common/js/animation"),app=getApp();Page({data:{province:"北京",todayTripData:[],achievementShareBee:{},achievementShareBtn:{},achievementShareHeart:{},noticeBoard:{},noticeBoardPadding:"20rpx 26rpx 20rpx 16rpx",bannerUrl:[{imgUrl:"../../img/img_banner_home.png",navUrl:""},{imgUrl:"../../img/img_banner_home.png",navUrl:""},{imgUrl:"../../img/img_banner_home.png",navUrl:""}],noticeContent:[{url:"",content:"拜访记录只保留近3个月的数据，您可以通过积分延长数据保留时间。（可在我的积分中查看延长规则）"}]},onLoad:function(){setTimeout(function(){this.setData({noticeBoardPadding:0})}.bind(this),1200)},onShow:function(){wxAPI.getSetting("scope.userLocation").then(function(e){e||wxAPI.authorize("scope.userLocation").then(function(){wxAPI.getSetting("scope.userLocation").then(function(e){})})}),this.setData({achievementShareBee:animation.achievementShareBeeShow,achievementShareBtn:animation.achievementShareBtnShow,achievementShareHeart:animation.achievementShareHeartShow,noticeBoard:animation.noticeBoardHide}),this.getTodayTrip()},onHide:function(){this.setData({achievementShareBee:animation.achievementShareBeeHide,achievementShareBtn:animation.achievementShareBtnHide,achievementShareHeart:animation.achievementShareBtnHide})},shareAchievementUrl:function(){var e={url:"../achievement/achievement"};wxAPI.wxPromiseObj(wx.navigateTo,e).then(function(e){console.log("成就页面跳转成功")})},getTodayTrip:function(){var e=this;wxAPI.postRequest(_api.api.today,{account_id:wx.getStorageSync("account_id")}).then(function(a){0===a.data.status?(console.log(a),e.setData({todayTripData:a.data.data.taskList})):e.setData({todayTripData:[]})})},clearData:function(){var e={title:"",content:"您的拜访记录将被清空,清空后无法恢复，请确认是否继续？",confirmText:"继续",confirmColor:"#50a0ff",cancelColor:"#a6a8b6"};wxAPI.wxPromiseObj(wx.showModal,e).then(function(e){e.cancel||wxAPI.postRequest(_api.api.clean,{account_id:wx.getStorageSync("account_id")}).then(function(e){0===e.data.status?wx.showToast({title:"清除成功",icon:"success"}):console.log(e.data.msg)})})},floatBtnTap:function(){var e=!this.data.floatBtnTapData;this.setData({floatBtnTapData:e})}});