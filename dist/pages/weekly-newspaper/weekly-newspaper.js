"use strict";var _api=require("../../config/api"),wxAPI=require("../../common/js/wxAPI"),app=getApp();Page({data:{screenData:["2017年7月","第二周"],screenBool:!1,dateBool:!1,weekBool:!1,weeks:[]},onLoad:function(e){},onReady:function(){},onShow:function(){for(var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,o=e.getDate(),s=[],n=[],i=2016;i<t+1;i++)s.push(i);for(var r=1;r<13;r++)n.push(r);var h=this.getFirstDayOfWeek(t,a),d=this.getLastDayOfWeek(this,t,a),l=[],D=[];if(h>0){if(a<2)c=t-1+"-12-"+(this.getThisMonthDays(t-1,12)-h+1);else var c=t+"-"+(a-1)+"-"+(this.getThisMonthDays(t,a-1)-h+1);l.push(c)}for(var f=void 0,u=this.getThisMonthDays(t,a),g=void 0,B=g=0!=h?7-h+1:1;B<u+1;B+=7){var k=t+"-"+a+"-"+B;l.push(k),B<=o&&o<B+7&&o-B<7&&(f=l.length-1)}if(6==d)for(var w=g-1;w<u+1;w+=7)D.push(t+"-"+a+"-"+w);else for(var v=7;v<u+1;v+=7)D.push(t+"-"+a+"-"+v);d<6&&D.push(t+"-"+(a+1)+"-"+(6-d));for(var y=[],p=0;p<5;p++){var x=l[p]+"~"+D[p];y.push(x)}this.setData({year:t,month:a,years:s,months:n,weekIndex:f,leftWeek:l,rightWeek:D,weeks:y,screenData:[t+"年"+a+"月","第"+(f+1)+"周"],yearIndex:s.length-1,monthIndex:n.indexOf(a)})},getThisMonthDays:function(e,t){return new Date(e,t,0).getDate()},getFirstDayOfWeek:function(e,t){return new Date(Date.UTC(e,t-1,1)).getDay()},getLastDayOfWeek:function(e,t,a){var o=e.getThisMonthDays(t,a);return new Date(Date.UTC(t,a-1,o)).getDay()},selectYear:function(e){e&&this.setData({yearIndex:e.target.dataset.index})},selectMonth:function(e){e&&this.setData({monthIndex:e.target.dataset.index})},screen1:function(){var e=this.data.dateBool;this.data.weekBool;this.data.screenBool?e?this.setData({dateBool:!1,screenBool:!1}):this.setData({dateBool:!0,weekBool:!1}):this.setData({dateBool:!0,screenBool:!0,weekBool:!1})},screen2:function(){var e=this.data.weekBool;this.data.dateBool;this.data.screenBool?e?this.setData({screenBool:!1,weekBool:!1}):this.setData({weekBool:!0,dateBool:!1}):this.setData({screenBool:!0,weekBool:!0,dateBool:!1})},getWeek:function(e){if(e){var t=e.target.dataset.index;this.setData({weekIndex:t,screenBool:!1,screenData:[this.data.year+"年"+this.data.month+"月","第"+(t+1)+"周"]})}},onShareAppMessage:function(){}});